# PRiMvVGPS

Результат работы в этом семестре:

№1  В ходе семестра была заменена связка Arduino Mega + RAMPS 1.4 и Orange Pi PC2 + Octopus Pro 1.1 Разница между связками заключается в архитектуре, производительности и точности печати.

1. Вычислительная мощность и управление шаговыми двигателями
Arduino Mega работает на 8-битном микроконтроллере ATmega2560 с частотой 16 МГц, что ограничивает скорость обработки G-кода и точность шага. В связке с RAMPS 1.4 драйверы шаговых двигателей (в данном случае DRV8825) управляются напрямую через Arduino, что может приводить к пропуску шагов при высоких скоростях из-за нехватки вычислительных ресурсов.

Orange Pi PC2 — это полноценный одноплатный компьютер (SBC) на 4-ядерном ARM Cortex-A53 с частотой 1,2 ГГц. В паре с Octopus Pro (на базе STM32F446/H743) шаговые двигатели управляются через более продвинутые драйверы (в данном случае TMC2209), поддерживающие StealthChop2, SpreadCycle и Sensorless Homing. Благодаря Klipper, все сложные вычисления (кинематика, планирование движения) выполняются на Orange Pi, а Octopus Pro лишь точно исполняет команды, что исключает пропуски шагов даже на высоких скоростях.

2. Точность печати
На Arduino Mega точность сильно зависит от буферизации команд и скорости передачи данных. При печати сложных моделей с высокой детализацией (например, решётки или мелкие элементы) Mega может не успевать обрабатывать команды, что приводит к зависаниям, артефактам и снижению точности.

В системе Orange Pi + Octopus Pro Klipper использует кинематическое планирование на лету, что позволяет плавно ускорять/замедлять движения без рывков. Драйверы моторов с интерполяцией микрошагов (например, TMC5160 в 1/256 микрошага) обеспечивают бесшумную работу и высокую точность позиционирования. Кроме того, Octopus Pro поддерживает более высокую частоту STEP-импульсов, что критично для точности на быстрых перемещениях.

3. Поддержка современных функций
Arduino Mega + RAMPS 1.4 не поддерживает линейное продвижение (Pressure Advance) и резонансную компенсацию (Input Shaping) — эти функции требуют быстрых вычислений, которые невозможны на 8-битном контроллере.

В связке Orange Pi + Octopus Pro Klipper реализует Pressure Advance (точный контроль экструзии на углах) и Input Shaping (подавление вибраций), что значительно улучшает качество печати, особенно на высоких скоростях.

4. Надёжность и помехоустойчивость
RAMPS 1.4 использует простые драйверы без защиты от перегрева и помех. На Orange Pi + Octopus Pro применяются изолированные драйверы с защитой от перегрузки, а питание логики (3.3/5 В) отделено от силовой части (24 В), что снижает риск сбоев из-за электрических наводок.

Итог
Связка Orange Pi PC2 + Octopus Pro 1.1 превосходит Arduino Mega + RAMPS 1.4 в точности, скорости и функциональности. Она обеспечивает:

Более плавные движения без пропусков шагов.

Поддержку современных алгоритмов (Pressure Advance, Input Shaping).

Высокую помехоустойчивость и точность печати на высоких скоростях.

Arduino Mega + RAMPS 1.4 — это устаревшее, но простое решение для базовых задач, тогда как Orange Pi + Octopus Pro — для более продвинутых.

№2  Замена DRV8825 на TMC2209. Основной причиной замены было то, что при покупке платы Octopus Pro 1.1 данные драйвера входили в комплект, но кроме того у них присудствуют нижеперечисленные отличия.

1. Шум и плавность работы
DRV8825 работает в режиме Step/Dir и использует классическую ЧИМ-модуляцию (PWM), что приводит к характерному высокочастотному писку при работе двигателей. Микрошаги (до 1/32) реализованы аппаратно, но на высоких скоростях возможна потеря точности.

TMC2209 поддерживает StealthChop2 — бесшумный режим работы за счёт интеллектуального управления током. Двигатели работают практически беззвучно, что критично для домашних 3D-принтеров. В режиме SpreadCycle (для высоких скоростей) шум немного возрастает, но остаётся ниже, чем у DRV8825.

2. Точность и пропуск шагов
DRV8825 склонен к пропуску шагов при высоких нагрузках или резких ускорениях из-за ограниченного контроля тока. Микрошаги 1/32 могут давать нелинейные искажения, особенно на дешёвых платах.

TMC2209 использует автоматическую подстройку тока (StallGuard5) и Sensorless Homing (определение конца хода без энкодеров). Это снижает риск пропуска шагов и улучшает точность позиционирования.

3. Нагрев и энергопотребление
DRV8825 греется сильнее, особенно при высоких токах, и требует массивных радиаторов.

TMC2209 благодаря продвинутым алгоритмам управления током греется меньше и часто обходится без радиаторов.

4. Дополнительные функции
TMC2209 поддерживает UART-управление, позволяя настраивать ток, микрошаги и режимы работы на лету через прошивку (Klipper/Marlin).

DRV8825 настраивается только перемычками и потенциометром (аналоговый регулятор тока, который может "уплывать").

№3  Замена БП 12В на 24В. Плата Octopus Pro 1.1 поддерживает 24В, а RAMPS нет, что в свою очередь влияет на скорость нагрева, энергоэффективность, стабильность работы электроники и даже на качество печати.
